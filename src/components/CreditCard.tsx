import React, { useEffect, useState } from 'react';

interface Props {
  cardType: string;
  cardNumber: string;
  cardHolder: string;
  expirationDate: string;
  backgroundColor: string;
  textColor: string;
  logoColor: string;
  logoCordobesa: string
}

const CreditCard: React.FC<Props> = ({
  cardType,
  cardNumber,
  cardHolder,
  expirationDate,
  backgroundColor,
  textColor,
  logoColor,
  logoCordobesa
}) => {
  // Estado para estilos dinÃ¡micos
  const [styles, setStyles] = useState({
    backgroundColor,
    textColor,
    logoColor,
  });

  // Escuchar evento personalizado desde el DOM
  useEffect(() => {
    const updateCard = (e: Event) => {
      const detail = (e as CustomEvent).detail;
      setStyles({
        backgroundColor: detail.backgroundColor,
        textColor: detail.textColor,
        logoColor: detail.logoColor,
        
      });
    };

    window.addEventListener('update-card', updateCard);

    return () => {
      window.removeEventListener('update-card', updateCard);
    };
  }, []);

  const svgFillColor = logoCordobesa === 'Negativo' ? '#FFFFFF' : '#000000';

  return (
    <div
      className="aspect-[1.586/1] max-w-sm p-6 rounded-xl shadow-md relative transition-all mx-auto"
      style={{backgroundColor: styles.backgroundColor,color: styles.textColor,}}
    >
      <header>
        <figure>
                    <svg fill={svgFillColor} width="145" height="24" viewBox="0 0 145 24" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_2425_182)">
          <path d="M8.70665 19.8516C8.22842 19.8702 7.75164 19.7879 7.30737 19.6103C6.86309 19.4326 6.46127 19.1635 6.12806 18.8206C5.45527 18.0667 5.10546 17.0795 5.15378 16.071C5.10472 15.0624 5.45462 14.075 6.12806 13.3215C6.46021 12.9771 6.86185 12.7071 7.30638 12.5294C7.75092 12.3516 8.22821 12.2702 8.70665 12.2904C9.97816 12.2904 11.0833 12.8816 12.022 14.0639L15.2478 11.1872C14.5016 10.2088 13.5199 9.43443 12.3938 8.936C11.1517 8.39863 9.80885 8.13262 8.45533 8.15582C6.95337 8.13137 5.46842 8.47601 4.13129 9.1594C2.8815 9.79774 1.83474 10.7713 1.10859 11.9708C0.364311 13.2068 -0.0196127 14.6256 4.03276e-05 16.0676C-0.0233076 17.5071 0.355812 18.9247 1.09482 20.161C1.8237 21.3632 2.87569 22.3372 4.13129 22.9724C5.47076 23.6564 6.95782 24.0022 8.46222 23.9794C9.81342 24.0016 11.1538 23.7356 12.3938 23.1992C13.5186 22.7068 14.5004 21.9383 15.2478 20.9652L12.022 18.0782C11.0821 19.2467 9.9839 19.8516 8.70665 19.8516Z"/>
          <path d="M28.12 9.16969C26.7609 8.47269 25.2515 8.11868 23.7237 8.13861C22.196 8.11952 20.6868 8.47348 19.3274 9.16969C18.0553 9.81361 16.9906 10.8021 16.2551 12.022C15.5196 13.2419 15.1431 14.644 15.1686 16.0676C15.1437 17.4906 15.5205 18.8919 16.256 20.1112C16.9915 21.3304 18.0558 22.3184 19.3274 22.962C20.6868 23.6582 22.196 24.0122 23.7237 23.9931C25.2515 24.013 26.7609 23.659 28.12 22.962C29.3916 22.3184 30.4559 21.3304 31.1914 20.1112C31.9269 18.8919 32.3037 17.4906 32.2788 16.0676C32.3001 14.6324 31.9172 13.22 31.1737 11.9914C30.439 10.7852 29.3813 9.80796 28.12 9.16969V9.16969ZM26.6707 18.0679C26.3905 18.6104 25.9666 19.0657 25.4451 19.3842C24.9232 19.6903 24.329 19.8517 23.7237 19.8517C23.1185 19.8517 22.5242 19.6903 22.0024 19.3842C21.4816 19.0648 21.0579 18.6097 20.7767 18.0679C20.4588 17.4496 20.2992 16.7624 20.312 16.0676C20.2951 15.3735 20.4513 14.6862 20.7664 14.0673C21.0465 13.5238 21.4704 13.0674 21.992 12.7475C22.5146 12.4435 23.1086 12.2833 23.7134 12.2833C24.3182 12.2833 24.9122 12.4435 25.4347 12.7475C25.9572 13.0664 26.3813 13.5231 26.6603 14.0673C26.9755 14.6862 27.1316 15.3735 27.1148 16.0676C27.1308 16.7616 26.9747 17.4487 26.6603 18.0679" />
          <path d="M46.9413 17.0402C47.4466 16.182 47.7018 15.2 47.678 14.2048C47.7137 13.1386 47.4218 12.0871 46.8414 11.1913C46.2611 10.2956 45.4202 9.59855 44.4316 9.19376C43.2738 8.70985 42.0267 8.47561 40.772 8.50637H33.47V23.6288H38.5824V19.8276H39.9595L42.5346 23.6323H47.9948L44.8068 18.9615C45.6823 18.534 46.4187 17.8679 46.931 17.0402H46.9413ZM42.001 15.5142C41.5567 15.8564 41.0009 16.0218 40.4415 15.9782H38.5789V12.4348H40.4415C41.0008 12.3929 41.5559 12.5581 42.001 12.8988C42.1781 13.0652 42.3164 13.2685 42.4062 13.4941C42.496 13.7198 42.5352 13.9624 42.5209 14.2048C42.5357 14.4478 42.4968 14.691 42.4069 14.9173C42.3171 15.1436 42.1785 15.3474 42.001 15.5142" />
          <path d="M60.9566 9.41716C59.5521 8.78156 58.0228 8.468 56.4811 8.4995H49.0104V23.6219H56.4811C58.0231 23.6524 59.5523 23.3376 60.9566 22.7009C62.1933 22.1353 63.2387 21.223 63.9655 20.075C64.6996 18.8642 65.0711 17.4688 65.0362 16.0538C65.0716 14.6378 64.7 13.2412 63.9655 12.0292C63.2398 10.8803 62.1941 9.9678 60.9566 9.40341V9.41716ZM58.8909 18.7003C58.5357 19.0214 58.1206 19.2696 57.6693 19.4306C57.218 19.5916 56.7394 19.6622 56.2607 19.6386H54.1194V12.476H56.2607C56.7398 12.4502 57.2193 12.5189 57.6717 12.6781C58.1242 12.8373 58.5409 13.084 58.8978 13.404C59.5542 14.0295 59.8824 14.9128 59.8824 16.0538C59.8824 17.188 59.5554 18.0748 58.8978 18.7003" />
          <path d="M96.148 15.7205C96.7903 15.4171 97.3351 14.9411 97.7213 14.3457C98.076 13.7744 98.26 13.1138 98.2515 12.4416C98.2609 11.8704 98.1234 11.3064 97.8522 10.8033C97.581 10.3003 97.185 9.8751 96.7023 9.56838C95.6695 8.84662 94.142 8.48575 92.12 8.48575H84.0228V23.6082H92.5538C94.6332 23.6082 96.2214 23.2427 97.3185 22.5118C97.8425 22.1875 98.2711 21.7305 98.5608 21.1871C98.8504 20.6438 98.9908 20.0336 98.9676 19.4186C98.9757 18.6126 98.7153 17.8268 98.2274 17.1846C97.6899 16.5169 96.9736 16.0151 96.1618 15.7376L96.148 15.7205ZM89.0457 12.067H91.428C92.5412 12.067 93.0966 12.4416 93.0943 13.1909C93.092 13.9401 92.5366 14.3148 91.428 14.3148H89.0457V12.067ZM92.12 20.0647H89.0457V17.6898H92.12C93.2492 17.6898 93.8104 18.0851 93.8104 18.8756C93.8104 19.666 93.2492 20.0647 92.12 20.0647" />
          <path d="M138.369 8.49951H133.346L126.723 23.622H131.918L132.951 20.9858H138.71L139.726 23.622H145.014L138.369 8.49951ZM134.345 17.3186L135.815 13.514L137.288 17.3186H134.345Z" />
          <path d="M78.6452 9.27969C77.2851 8.61697 75.7916 8.27252 74.2782 8.27252C72.7647 8.27252 71.2712 8.61697 69.9111 9.27969C68.6477 9.91994 67.5903 10.9022 66.8597 12.1141C66.1292 13.326 65.7549 14.7187 65.7798 16.1329C65.7538 17.5465 66.1276 18.9387 66.8584 20.1497C67.5892 21.3607 68.6472 22.3414 69.9111 22.9792C71.2699 23.6462 72.764 23.993 74.2782 23.993C75.7924 23.993 77.2864 23.6462 78.6452 22.9792C79.9091 22.3414 80.9672 21.3607 81.6979 20.1497C82.4287 18.9387 82.8025 17.5465 82.7765 16.1329C82.8014 14.7187 82.4272 13.326 81.6966 12.1141C80.966 10.9022 79.9086 9.91994 78.6452 9.27969V9.27969ZM77.2027 18.1194C76.9255 18.6578 76.5065 19.1105 75.9909 19.4289C75.472 19.7416 74.8756 19.9024 74.2696 19.8929C73.6633 19.9041 73.0664 19.7432 72.5482 19.4289C72.0299 19.1126 71.6094 18.6594 71.3329 18.1194C71.0294 17.5094 70.8804 16.8344 70.8991 16.1535C70.8827 15.4639 71.0389 14.7811 71.3536 14.167C71.6281 13.6256 72.0491 13.172 72.5689 12.8575C73.0871 12.5433 73.684 12.3824 74.2902 12.3935C74.8962 12.384 75.4927 12.5448 76.0116 12.8575C76.5288 13.174 76.9482 13.6272 77.2234 14.167C77.531 14.7829 77.68 15.4657 77.6572 16.1535C77.6729 16.8431 77.5168 17.5257 77.2027 18.1401" />
          <path d="M81.7712 7.59217L85.2587 4.46801C83.8495 3.03306 82.1642 1.89751 80.3041 1.12967C78.444 0.361828 76.4475 -0.0224292 74.4348 1.38172e-05C70.4154 0.0030063 66.5378 1.48341 63.5421 4.15868L66.7885 7.51999C71.2055 3.56753 77.9326 3.6019 81.7781 7.59217" fill="#EC663B"/>
          <path d="M112.745 19.7829H105.168V17.7964H111.578V14.1223H105.168V12.3489H112.466V8.49951H100.141V23.6323H112.745V22.5256V21.931V19.7829Z" />
          <path d="M126.365 16.2841C125.8 15.6631 125.09 15.1908 124.299 14.9093C123.345 14.5871 122.368 14.3377 121.376 14.1635C120.721 14.0524 120.075 13.8904 119.445 13.6789C119.059 13.5243 118.863 13.2974 118.863 12.9915C118.86 12.3729 119.517 12.0292 120.839 12.0292C122.315 12.0695 123.76 12.4544 125.06 13.1531L126.599 9.45839C125.768 9.00236 124.875 8.67004 123.948 8.47199C122.942 8.24755 121.915 8.13232 120.884 8.1283C119.562 8.0979 118.248 8.33161 117.018 8.81568C116.052 9.18176 115.215 9.82072 114.608 10.6544C114.08 11.4152 113.799 12.3202 113.806 13.2459C113.755 14.1936 114.065 15.1254 114.673 15.8545C115.226 16.475 115.925 16.9476 116.708 17.2293C117.664 17.5607 118.641 17.8249 119.634 18.0197C120.303 18.1464 120.96 18.3268 121.6 18.5593C121.999 18.7174 122.196 18.9546 122.196 19.2708C122.193 19.4082 122.148 19.5415 122.067 19.6523C121.986 19.7632 121.872 19.846 121.741 19.8894C121.253 20.0537 120.737 20.1225 120.223 20.0922C119.351 20.086 118.485 19.9599 117.648 19.7176C116.806 19.4834 115.996 19.1451 115.238 18.7106L114.604 20.1403L113.572 22.4224C113.792 22.5496 114.026 22.6665 114.26 22.7661C114.977 23.11 115.73 23.3728 116.505 23.5497C117.708 23.8315 118.939 23.9733 120.175 23.9725C121.497 24.0076 122.812 23.7737 124.041 23.2851C124.997 22.9132 125.827 22.2764 126.433 21.4498C126.963 20.6935 127.243 19.7913 127.236 18.8687C127.289 17.9231 126.974 16.9936 126.358 16.2738"/>
          </g>
          <defs>
          <clipPath id="clip0_2425_182">
          <rect width="145" height="24" fill="white"/>
          </clipPath>
          </defs>
          </svg>
          <span className="">{logoCordobesa}</span>
          

        </figure>
      </header>

      <div className="text-sm uppercase">{cardType}</div>
      <div className="text-xl font-mono my-2">{cardNumber}</div>
      <div className="flex justify-between text-sm mt-4">
        <span>{cardHolder}</span>
        <span>{expirationDate}</span>
      </div>
      <div
        className="w-6 h-6 rounded-full absolute top-4 right-4"
        style={{ backgroundColor: styles.logoColor }}
      />
    </div>
  );
};

export default CreditCard;
